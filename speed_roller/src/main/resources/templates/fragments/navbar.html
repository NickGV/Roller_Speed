<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head>
    <meta charset="UTF-8" />
  </head>
  <body>
    <header th:fragment="navbar" class="text-center p-4">
      <nav class="navbar navbar-expand-lg bg-light shadow-sm rounded">
        <div class="container">
          <a class="navbar-brand fw-bold" href="#" th:href="@{/home}">
            <span class="text-primary">Roller</span
            ><span class="text-warning">Speed</span>
          </a>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
              <li class="nav-item">
                <a class="nav-link" th:href="@{/home}">Inicio</a>
              </li>

              <!-- Menú Corporativo (visible para todos) -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownCorporativo"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Corporativo
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownCorporativo"
                >
                  <li>
                    <a class="dropdown-item" th:href="@{/corporativo/mision}"
                      >Misión</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/corporativo/vision}"
                      >Visión</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/corporativo/valores}"
                      >Valores</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/corporativo/servicios}"
                      >Servicios</a
                    >
                  </li>
                </ul>
              </li>

              <li class="nav-item">
                <a class="nav-link" th:href="@{/eventos}">Eventos</a>
              </li>

              <li class="nav-item dropdown" sec:authorize="!isAuthenticated()">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownRegistro"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Registro
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownRegistro"
                >
                  <li>
                    <a
                      class="dropdown-item"
                      th:href="@{/registro/nuevoEstudiante}"
                      >Inscripción de Estudiantes</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      th:href="@{/registro/nuevoInstructor}"
                      >Inscripción de Instructor</a
                    >
                  </li>
                </ul>
              </li>

              <!-- Menú de Administrador -->
              <li
                class="nav-item dropdown"
                sec:authorize="hasRole('ADMINISTRADOR')"
              >
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownAdmin"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Administración
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownAdmin">
                  <li>
                    <a class="dropdown-item" th:href="@{/admin/dashboard}">
                      <i class="bi bi-speedometer2"></i> Dashboard
                    </a>
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" th:href="@{/admin/estudiantes}">
                      <i class="bi bi-people"></i> Estudiantes
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/admin/instructores}">
                      <i class="bi bi-person-badge"></i> Instructores
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/admin/clases}">
                      <i class="bi bi-calendar3"></i> Clases
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/admin/pagos}">
                      <i class="bi bi-cash-stack"></i> Pagos
                    </a>
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" th:href="@{/horarios/estudiantes}">
                      <i class="bi bi-calendar-check"></i> Horario Estudiantes
                    </a>
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      th:href="@{/horarios/instructores}"
                    >
                      <i class="bi bi-calendar-week"></i> Horario Instructores
                    </a>
                  </li>
                </ul>
              </li>

              <li
                class="nav-item dropdown"
                sec:authorize="hasRole('INSTRUCTOR')"
              >
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownInstructor"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Instructor
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownInstructor"
                >
                  <li>
                    <a class="dropdown-item" th:href="@{/instructor/perfil}"
                      >Mi Perfil</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/horarios/instructores}"
                      >Mis Horarios</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/instructor/alumnos}"
                      >Mis Alumnos</a
                    >
                  </li>
                </ul>
              </li>

              <li
                class="nav-item dropdown"
                sec:authorize="hasRole('ESTUDIANTE')"
              >
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownEstudiante"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Estudiante
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownEstudiante"
                >
                  <li>
                    <a class="dropdown-item" th:href="@{/estudiantes/perfil}"
                      >Mi Perfil</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/horarios/estudiantes}"
                      >Mis Horarios</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" th:href="@{/estudiantes/pagos}"
                      >Mis Pagos</a
                    >
                  </li>
                </ul>
              </li>
            </ul>

            <div class="d-flex align-items-center">
              <div class="me-3" sec:authorize="isAuthenticated()">
                <span class="text-muted" sec:authentication="name"></span>
                <span
                  class="badge bg-primary ms-2"
                  sec:authentication="principal.authorities"
                ></span>
              </div>

              <form
                th:action="@{/logout}"
                method="post"
                sec:authorize="isAuthenticated()"
                class="me-2"
              >
                <button type="submit" class="btn btn-danger">
                  Cerrar sesión
                </button>
              </form>

              <a
                th:href="@{/login}"
                class="btn btn-primary"
                sec:authorize="!isAuthenticated()"
              >
                Iniciar sesión
              </a>
            </div>
          </div>
        </div>
      </nav>
    </header>
  </body>
</html>
